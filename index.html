<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Redirecting...</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    padding-top: 150px;
    background: #fff;
    color: #444;
  }
  .spinner {
    margin: 40px auto;
    width: 40px;
    height: 40px;
    border: 5px solid #ccc;
    border-top-color: #1a73e8;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  @keyframes spin {
    to { transform: rotate(360deg); }
  }
  .message {
    font-size: 18px;
  }
  .adspot {
    margin-top: 50px;
    width: 300px;
    height: 250px;
    background: #eee;
    border: 1px solid #ccc;
    display: inline-block;
    line-height: 250px;
    color: #999;
    font-weight: bold;
  }
  .default-message {
    font-size: 72px;
    font-weight: bold;
    color: red;
  }
</style>
</head>
<body>

<div id="content"></div>

<script>
// Function to get full URL from path or query param
function getRedirectUrl() {
  // Try from path after '/'
  let path = window.location.pathname.slice(1);
  if (path) {
    try {
      // decode URL-encoded path
      let decoded = decodeURIComponent(path);
      if (decoded.startsWith('http://') || decoded.startsWith('https://')) {
        return decoded;
      }
    } catch {
      // ignore decode errors
    }
  }
  // Try from ?url= param
  const params = new URLSearchParams(window.location.search);
  const urlParam = params.get('url');
  if (urlParam && (urlParam.startsWith('http://') || urlParam.startsWith('https://'))) {
    return urlParam;
  }
  // No valid URL found
  return null;
}

const redirectUrl = getRedirectUrl();
const content = document.getElementById('content');

if (!redirectUrl) {
  // No valid URL â€” show default
  content.innerHTML = `<div class="default-message">BITCH</div>`;
} else {
  // Show wait + spinner + ad
  content.innerHTML = `
    <div class="message">Please wait 5 seconds while we prepare your link...</div>
    <div class="spinner"></div>
    <div class="adspot">[Your Ad Here]</div>
  `;

  let countdown = 5;
  const interval = setInterval(() => {
    countdown--;
    if (countdown > 0) {
      content.querySelector('.message').textContent = `Please wait ${countdown} seconds while we prepare your link...`;
    } else {
      clearInterval(interval);
      // Redirect now
      window.location.href = redirectUrl;
    }
  }, 1000);
}
</script>

</body>
</html>